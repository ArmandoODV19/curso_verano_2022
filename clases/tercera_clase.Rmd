---
title: "Introducción a dplyr"
author: "Armando Ocampo"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# dplyr

dplyr es una librería que nos permite manipular datos, ordenarlos y extraer información necesaria.
Esta paquetería no forma parte de las paqueterías base de R. Por lo que tenemos que descargarla.

install.packages("dplyr")

Una vez instalada, la llamaremos para comenzar a trabajar.

library(dplyr)

dplyr pertenece a un conjunto de paqueterias llamado tidyverse, el cual nos permite manipular información. Es bueno que sepas esto, no obstante, el día de hoy solo trabajaremos con la paqueteria mencionada.

Las funciones principales de dplyr son filter(), arrange(), mutate(), group_by() y summarise(). También se conocen como verbos. Además existe un elemento denominado pipe " %>%" que nos permite unir dos elementos y tabajar con ellos. 

# filter()

El primer verbo que utilizaremos se llama filter() y nos permite filtrar un conjunto de datos con una caracteristica en específico. Los ejemplos mostrados en este artículo se basaran en información de los data set *iris* y *mtcars*. Antes de comenzar, haremos un resumen de los elementos que contiene cada data set.

```{r resumen, eval=FALSE}
str(iris)
summary(iris)
glimpse(iris)


str(mtcars)
summary(mtcars)
glimpse(mtcars)
```

Nota_ glimpse() es una función de dplyr que permite observar un resumen de la información presente en el data frame de trabajo.


Comenzaremos a trabajar con el dataset de iris. De este data set nos quedaremos solo con las especies setosas. En este caso dentro de la función filter() se coloca el nombre de la variable y la condición a seguir.

Nota 1: el nombre de la variable debe coincidir con la forma en la cual está escrito en el df.

Nota 2: en caso de realizar una condición con elementos de tipo caracter, este va en comillas. Las comparaciones numéricas van sin comillas 

Nota 3: el "pipe" %>% , nos permite tomar el objeto de la izquierda y ejercer un verbo o una acción en especifico. Esta última, se escribe del lado derecho.

```{r filter, eval=FALSE}
iris %>% 
  filter(Species == "setosa")

# al igual que en ejercicios previos, al correr esta parte del codigo
# el resultado se observará en la consola. Si queremos guaradar el resultado
# debemos asignarlo a un objeto

df_setosas <- iris %>% 
  filter(Species == "setosa")
```


Una de las ventajas de filter es realizar varios filtros en una sola función. A continuación filtraremos las iris de tipo setosas con longitud de sepalo mayor a 4.8. Solo debemos separar cada condición con una coma

```{r filter2, eval=FALSE}
iris %>% 
  filter(Species == "setosa",
         Sepal.Length > 4.8)
```








